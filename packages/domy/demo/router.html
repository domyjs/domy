<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Domy</title>
    <script src="../../router/dist/index.js"></script>
    <script src="../dist/index.js"></script>
  </head>
  <body>
    <header>
      <nav>
        <ul d-for="route of routes">
          <li d-if="!route.hide" :key="route.name">
            <router-link :to="route.route">{{ route.name }}</router-link>
          </li>
        </ul>
      </nav>
    </header>
    <router-view></router-view>
    <footer>Footer of the {{ $router.path }}</footer>
  </body>
  <script>
    function r(route, name, hide = false) {
      const component = DOMY.createComponent({
        html: `<div :style="{ border: 'thin solid #000' }"><h1>${name}</h1></div>`
      });
      return {
        route,
        name,
        component,
        hide
      };
    }

    const routes = [r('/', 'Home'), r('/about', 'About'), r(':not-found:', 'Not Found', true)];

    const { router, RouterView, RouterLink } = createRouter({
      hashMode: true,
      DOMY,
      routes
    });

    DOMY.plugin(router);

    DOMY.createApp({
      data() {
        return {
          routes: [...routes, r('/something-that-doesnt-exist-login', 'login')]
        };
      }
    })
      .components({
        RouterView,
        RouterLink
      })
      .mount();
  </script>
</html>
