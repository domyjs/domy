<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DOMY | Demo for domy framework</title>
    <script src="../dist/index.js"></script>
    <script>
      window.DOMY.store({
        count: 0
      });

      window.DOMY.data('counter', { count: 0, activeSupperBtn: false });

      window.DOMY.data('searchBar', { search: '' });
    </script>
  </head>
  <body>
    <h1 d-text="$store.count.value"></h1>
    <div>
      <button @click="$store.count.set((old) => old + 1)">+ global count</button>
    </div>

    <div d-data="$state.searchBar">
      <h1 d-text="search.value"></h1>
      <input type="text" d-model="search" />
    </div>

    <div d-ignore d-data="$state.searchBar">
      <h1 d-text="search.value"></h1>
      <input type="text" d-model="search" />
    </div>

    <div>
      <div @notify="alert('User notified')"></div>
      <button @click="$dispatch('notify')">Notify</button>
    </div>

    <div d-data="{ test: 'hello', other: 'other' }">
      <p d-text="test.value"></p>
      <div d-data="{ test: 'bye' }">
        <p d-text="test.value"></p>
        <p d-text="other.value"></p>
        <button @click="test.set('test2')">Change message2</button>
      </div>
      <button @click="test.set('test1')">Change message1</button>
    </div>

    <main d-data="$state.counter">
      <h1 d-text="search.value"></h1>

      <template d-effect="console.log(count.value)"></template>
      <template d-init="console.log('Count initial value:', count.value)"></template>

      <h1 d-text="count.value"></h1>

      <h2 d-html="new Date().getFullYear()" d-ref="year"></h2>

      <div
        :style="`width: 50px; height: 50px; background-color: ${count.value % 2 === 0 ? 'red' : 'yellow'}`"
      ></div>

      <button d-show="!activeSupperBtn.value" @click="activeSupperBtn.set(!activeSupperBtn.value)">
        Active supper btn
      </button>
      <button @click="count.set((old) => old + 1)">+</button>
      <button @click="count.set((old) => old - 1)">-</button>
      <button d-if="activeSupperBtn.value" d-on:click="count.set((old) => old + 10)">+10</button>
      <button d-if="activeSupperBtn.value" d-on:click="count.set((old) => old - 10)">-10</button>

      <ul d-if="count.value > 0" d-for="test, index of Array(count.value).fill('Click')">
        Message:
        <li d-text="test.value + ' ' + index.value"></li>
      </ul>
    </main>
  </body>
</html>
