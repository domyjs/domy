<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DOMY | Demo for domy framework</title>
    <script src="../dist/index.js"></script>
  </head>
  <body>
    <div>
      <h1 d-text="this.search"></h1>
      <input type="text" d-model="search" />
    </div>

    <div d-ignore>
      <h1 d-text="this.search"></h1>
      <input type="text" d-model="search" />
    </div>

    <div>
      <div @notify="alert('User notified')"></div>
      <button @click="this.$dispatch('notify')">Notify</button>
    </div>

    <main>
      <h1 d-text="this.search"></h1>

      <h1>Count: {{ this.count }}</h1>

      <h2 d-html="new Date().getFullYear()" d-ref="year"></h2>

      <div
        :style="`width: 50px; height: 50px; background-color: ${this.count % 2 === 0 ? 'red' : 'yellow'}`"
      ></div>

      <button @click="this.activeSupperBtn = !this.activeSupperBtn">Active supper btn</button>
      <button @click="this.incrementCount()">+</button>
      <button @click="this.count--">-</button>

      <button d-if="this.activeSupperBtn" d-on:click="this.count += 10">+10</button>
      <button d-if="this.activeSupperBtn" d-on:click="this.count -= 10">-10</button>

      <ul d-if="this.count > 0" d-for="test, index of Array(this.count).fill('Click')">
        Message:
        <li d-text="this.test + ' ' + this.index"></li>
      </ul>

      <ul d-for="el of this.list">
        Message:
        <li d-text="this.el"></li>
      </ul>

      <button @click="this.list.push(this.count) && this.count++">Add element</button>
      <button @click="this.list.shift()  && this.count--">Remove element</button>
    </main>
  </body>
  <script>
    window.DOMY({
      $init() {
        console.log('Init', this.$refs, this.$el);
        this.displayThis();
      },
      $watch: {
        count() {
          this.displayThis();
          this.count = Math.max(this.count, 0);
        }
      },
      $state: {
        count: 0,
        activeSupperBtn: false,
        list: [],
        search: ''
      },
      $fn: {
        displayThisSupper: () => {
          console.log('This', this, this.$refs, this.$el);
        },
        displayThis() {
          this.displayThisSupper();
        },
        incrementCount() {
          this.displayThis();
          this.count++;
        }
      }
    });
  </script>
</html>
