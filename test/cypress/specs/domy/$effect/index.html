<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>$effect</title>
    <script src="/packages/domy/dist/index.js"></script>
  </head>
  <body>
    <h1 id="effectCall">0</h1>

    <Count d-if="show" :count="count"></Count>

    <span d-if="show">{{ show }}</span>

    <button id="inc" @click="++count">Increment</button>
    <button id="show" @click="show = !show">Show/Hide</button>
  </body>
  <script>
    const { onUnmounted, signal } = DOMY;

    const Count = DOMY.createComponent({
      props: ['count'],
      html: `
        <div>
          <p>{{ $props.count }}</p>
        </div>
      `,
      app: ({ props }) => {
        console.log('Effect called', props.count);
        const el = document.querySelector('#effectCall');
        el.textContent = Number(el.textContent) + 1;

        onUnmounted(() => {
          console.log('unmount');
        });
      }
    });

    DOMY.createApp(() => {
      const show = signal(false);
      const count = signal(0);

      return {
        show,
        count
      };
    })
      .components({
        Count
      })
      .mount();
  </script>
</html>
