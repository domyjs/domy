(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6899],{2615:(e,r,t)=>{"use strict";t.r(r),t.d(r,{assets:()=>x,contentTitle:()=>p,default:()=>w,frontMatter:()=>h,metadata:()=>m,toc:()=>g});var n=t(1085),o=t(1184),s=t(4041),a=t(1983),i=t(3818),u=t.n(i),c=t(5228),l=t.n(c);function d(){const[e,r]=(0,s.useState)(null);return(0,s.useEffect)((()=>{if(e)return;(()=>{function e(e,r){return{route:e,name:r,component:l().createComponent({html:`<div><h1>${r}</h1></div>`})}}window.DOMY||(window.DOMY=l());const t=[e("/","Home"),e("/about","About"),e("/user/:id","User")],{router:n,RouterView:o,RouterLink:s}=u()({hashMode:!0,routes:t});r({router:n,RouterView:o,RouterLink:s})})()}),[e]),e?(0,n.jsx)(a.A,{code:'\n<style>\n.underline{\n  text-decoration: underline;\n}\n\n    .fade-enter {\n      transition: all 0.3s ease;\n      opacity: 0;\n    }\n\n    .fade-enter-to {\n      opacity: 1;\n    }\n\n    .fade-out {\n      transition: all 0.3s ease;\n      opacity: 1;\n    }\n\n    .fade-out-to {\n      opacity: 0;\n    }\n</style>\n<nav>\n  <router-link to="/" active-class="underline">Home</router-link>\n  <router-link to="/about" active-class="underline">About</router-link>\n  <router-link to="/user/42" active-class="underline">User</router-link>\n</nav>\n\n<router-view transition="fade"></router-view>\n\n<footer>\n  Current route: {{ $router.path }}<br />\n  Parameters: {{ JSON.stringify($router.params) }}\n</footer>\n',components:()=>({RouterView:e.RouterView,RouterLink:e.RouterLink}),plugins:()=>[e.router]}):(0,n.jsx)("div",{children:"Loading DOMY router\u2026"})}const h={},p="Router",m={id:"plugins/router",title:"Router",description:"DOMY Router enables declarative navigation and component rendering based on the current URL. It supports static, dynamic, optional, wildcard routes and catch-all fallback logic.",source:"@site/docs/plugins/router.mdx",sourceDirName:"plugins",slug:"/plugins/router",permalink:"/domy/docs/plugins/router",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Mask",permalink:"/domy/docs/plugins/mask"},next:{title:"Throttle",permalink:"/domy/docs/plugins/throttle"}},x={},g=[{value:"Installation",id:"installation",level:2},{value:"Basic Setup",id:"basic-setup",level:2},{value:"<code>&lt;router-link&gt;</code>",id:"router-link",level:2},{value:"<code>&lt;router-view&gt;</code>",id:"router-view",level:2},{value:"Accessing Router Info",id:"accessing-router-info",level:2},{value:"Route Patterns",id:"route-patterns",level:2},{value:"Full Example",id:"full-example",level:2}];function j(e){const r={br:"br",code:"code",h1:"h1",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.h1,{id:"router",children:"Router"}),"\n",(0,n.jsx)(r.p,{children:"DOMY Router enables declarative navigation and component rendering based on the current URL. It supports static, dynamic, optional, wildcard routes and catch-all fallback logic."}),"\n",(0,n.jsx)(r.h2,{id:"installation",children:"Installation"}),"\n",(0,n.jsx)(r.p,{children:"Include the DOMY Router plugin via CDN:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-html",children:'<script src="https://unpkg.com/@domyjs/router@1.x.x"><\/script>\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"basic-setup",children:"Basic Setup"}),"\n",(0,n.jsx)(r.p,{children:"Define your routes by associating a route, name, and component."}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-js",children:"function r(route, name) {\n  return {\n    route,\n    name,\n    component: DOMY.createComponent({\n      html: `<div><h1>${name}</h1></div>`\n    })\n  };\n}\n\nconst routes = [r('/', 'Home'), r('/about', 'About')];\n\nconst { router, RouterView, RouterLink, useRouter } = createRouter({\n  hashMode: true,\n  routes\n});\n\nDOMY.createApp(() => {\n  return { routes };\n})\n  .plugins([router])\n  .components({ RouterView, RouterLink })\n  .mount();\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"router-link",children:(0,n.jsx)(r.code,{children:"<router-link>"})}),"\n",(0,n.jsxs)(r.p,{children:["Render links to routes with optional styling for the active one. You can also pass ",(0,n.jsx)(r.code,{children:"params"})," and ",(0,n.jsx)(r.code,{children:"query-params"}),";"]}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-html",children:'<router-link to="/about" active-class="active-link">Go to About</router-link>\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"router-view",children:(0,n.jsx)(r.code,{children:"<router-view>"})}),"\n",(0,n.jsx)(r.p,{children:"Render the component for the current route dynamically."}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-html",children:'<router-view transition="fade"></router-view>\n'})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"accessing-router-info",children:"Accessing Router Info"}),"\n",(0,n.jsx)(r.p,{children:"Within any template or component:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-html",children:"<p>Current Path: {{ $router.path }}</p>\n<p>Params: {{ JSON.stringify($router.params) }}</p>\n"})}),"\n",(0,n.jsx)(r.p,{children:"Or with the hook:"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-js",children:"const { router, RouterView, RouterLink, useRouter } = createRouter({\n  hashMode: true,\n  routes\n});\n\n// Example\nconst route = useRouter();\nroute.navigate({ name: 'Home' });\n"})}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"route-patterns",children:"Route Patterns"}),"\n",(0,n.jsx)(r.p,{children:"DOMY Router supports expressive route types to match paths precisely:"}),"\n",(0,n.jsxs)(r.ul,{children:["\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Literal"})," (",(0,n.jsx)(r.code,{children:"/home"}),")",(0,n.jsx)(r.br,{}),"\n","Matches ",(0,n.jsx)(r.code,{children:"/home"})," exactly. Does not match ",(0,n.jsx)(r.code,{children:"/home/page"})," or ",(0,n.jsx)(r.code,{children:"/homepage"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Named Parameter"})," (",(0,n.jsx)(r.code,{children:"/:name"}),")",(0,n.jsx)(r.br,{}),"\n","Matches ",(0,n.jsx)(r.code,{children:"/john"})," or ",(0,n.jsx)(r.code,{children:"/123"}),". Does not match ",(0,n.jsx)(r.code,{children:"/john/doe"})," or ",(0,n.jsx)(r.code,{children:"/"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Optional Parameter"})," (",(0,n.jsx)(r.code,{children:"/:tab?"}),")",(0,n.jsx)(r.br,{}),"\n","Matches ",(0,n.jsx)(r.code,{children:"/profile"})," or ",(0,n.jsx)(r.code,{children:"/profile/settings"}),". Does not match ",(0,n.jsx)(r.code,{children:"/profile/settings/details"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Rest Segment"})," (",(0,n.jsx)(r.code,{children:"/users/:path+"}),")",(0,n.jsx)(r.br,{}),"\n","Matches ",(0,n.jsx)(r.code,{children:"/users/john"}),", ",(0,n.jsx)(r.code,{children:"/users/john/settings"}),". Requires at least one segment after ",(0,n.jsx)(r.code,{children:"/users"}),"."]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Wildcard"})," (",(0,n.jsx)(r.code,{children:"/docs/:slug*"}),")",(0,n.jsx)(r.br,{}),"\n","Matches ",(0,n.jsx)(r.code,{children:"/docs"}),", ",(0,n.jsx)(r.code,{children:"/docs/intro"}),", ",(0,n.jsx)(r.code,{children:"/docs/a/b/c"}),". Supports zero or more segments."]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Regex Constraint"})," (",(0,n.jsx)(r.code,{children:"/order/:id(\\\\d+)"}),")",(0,n.jsx)(r.br,{}),"\n","Matches ",(0,n.jsx)(r.code,{children:"/order/42"})," but not ",(0,n.jsx)(r.code,{children:"/order/abc"}),". Useful for numeric IDs."]}),"\n"]}),"\n",(0,n.jsxs)(r.li,{children:["\n",(0,n.jsxs)(r.p,{children:[(0,n.jsx)(r.strong,{children:"Catch-All (404 Fallback)"})," (",(0,n.jsx)(r.code,{children:"/:path*"}),")",(0,n.jsx)(r.br,{}),"\n","Matches any unmatched path. Should be declared last to handle unknown routes."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(r.hr,{}),"\n",(0,n.jsx)(r.h2,{id:"full-example",children:"Full Example"}),"\n",(0,n.jsx)(r.pre,{children:(0,n.jsx)(r.code,{className:"language-html",children:'<nav>\n  <router-link to="/" active-class="underline">Home</router-link>\n  <router-link to="/about" active-class="underline">About</router-link>\n  <router-link to="/user/42" active-class="underline">User</router-link>\n</nav>\n\n<router-view transition="fade"></router-view>\n\n<footer>\n  Current route: {{ $router.path }}<br />\n  Parameters: {{ JSON.stringify($router.params) }}\n</footer>\n'})}),"\n",(0,n.jsx)(d,{})]})}function w(e={}){const{wrapper:r}={...(0,o.R)(),...e.components};return r?(0,n.jsx)(r,{...e,children:(0,n.jsx)(j,{...e})}):j(e)}},3818:function(e){e.exports=function(){"use strict";function e(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase()}function r(e,r){const t={isMatching:!1,params:{}};r=r.replace(/\/+$/,"")||"/";let n=e.replace(/\/+$/,"")||"/";n=n.replace(/:([a-zA-Z0-9_]+)(\([^)]+\))?([?*+])?(?:\/|$)/g,(function(e,r,t,n){const o=null!=t?t:"[^/]+";switch(n){case"?":return String.raw`(?:(?<${r}>(${o})))?`;case"*":return String.raw`(?:(?<${r}>(${o}(?:\/${o})*)))?`;case"+":return String.raw`(?<${r}>(${o}(?:\/${o})*))`;default:return String.raw`(?<${r}>${o})`}}));const o=new RegExp(`^${n}$`,"i"),s=r.match(o);return s?(t.isMatching=!0,s.groups&&(t.params=s.groups),t):t}function t(e,r={},t={}){const n=new URLSearchParams(t).toString();return e.replace(/:([a-zA-Z0-9_]+)(\([^)]+\))?([?*+])?(?:\/|$)/g,(function(e,t,n,o,s,a){const i=r[t];if(void 0!==i)return i+("/"===a[s+e.length-1]?"/":"");if("?"===o||"*"===o)return"";throw new Error(`(Router) Missing required parameter: ${t}.`)}))+(n?`?${n}`:"")}class n{constructor(r){this.routes=new Map;for(const t of r.routes){const r=e(t.name);this.routes.set(r,t)}this.hashMode=r.hashMode,this.currentRoute=window.DOMY.signal({path:""}).value,this.init()}init(){window.addEventListener("popstate",(()=>this.handleRouteChange())),this.hashMode&&window.addEventListener("hashchange",(()=>this.handleRouteChange())),this.handleRouteChange()}handleRouteChange(){const e=this.getPath(),r=this.getQueryParams(),{matchedRoute:t,params:n}=this.matchRoute(e)||{};this.push(e,t,n,r)}getPath(){return this.hashMode?window.location.hash.replace(/^#/,"").split("?")[0]||"/":window.location.pathname.split("?")[0]||"/"}getQueryParams(){const e=this.hashMode?window.location.hash.split("?")[1]:window.location.search.slice(1);return Object.fromEntries(new URLSearchParams(e))}matchRoute(e){for(const t of this.routes.values()){const n=r(t.route,e);if(n.isMatching)return{matchedRoute:t,params:n.params}}return null}push(e,r,t,n){var o,s;const a=this.currentRoute.route,i={name:null==a?void 0:a.name,route:a,params:this.currentRoute.params,queryParams:this.currentRoute.queryParams},u={name:null==r?void 0:r.name,route:r,params:t,queryParams:n};null===(o=null==r?void 0:r.before)||void 0===o||o.call(r,{from:i,to:u}),this.currentRoute.path=e,this.currentRoute.route=r,this.currentRoute.params=null!=t?t:{},this.currentRoute.queryParams=null!=n?n:{},null===(s=null==a?void 0:a.after)||void 0===s||s.call(a,{from:i,to:u})}replace(r){var n,o,s;const a=r.name?null===(n=this.routes.get(e(r.name)))||void 0===n?void 0:n.route:r.path;if(!a)throw new Error(`(Router) Router not found: ${null!==(o=r.name)&&void 0!==o?o:a}`);const{matchedRoute:i}=null!==(s=this.matchRoute(a))&&void 0!==s?s:{};if(!i)throw new Error(`(Router) Route not found for: "${r.path}".`);const u=t(a,r.params,r.queryParams);this.hashMode?window.location.replace("#"+u):(window.history.replaceState({},"",u),this.push(a,i,r.params,r.queryParams))}navigate(r){var n,o,s;const a=r.name?null===(n=this.routes.get(e(r.name)))||void 0===n?void 0:n.route:r.path;if(!a)throw new Error(`(Router) Router not found: ${null!==(o=r.name)&&void 0!==o?o:a}`);const{matchedRoute:i}=null!==(s=this.matchRoute(a))&&void 0!==s?s:{};if(!i)throw new Error(`(Router) Route not found for: "${r.path}".`);const u=t(a,r.params,r.queryParams);this.hashMode?window.location.hash=u:(window.history.pushState({},"",u),this.push(a,i,r.params,r.queryParams))}goBack(){window.history.back()}goForward(){window.history.forward()}getHelper(){const e=this;return{get path(){return e.currentRoute.path},get fullPath(){return t(e.currentRoute.path,e.currentRoute.params,e.currentRoute.queryParams)},get queryParams(){return e.currentRoute.queryParams},get params(){return e.currentRoute.params},navigate:this.navigate.bind(this),goBack:this.goBack.bind(this),goForward:this.goForward.bind(this)}}createRouterLink(){return window.DOMY.createComponent({props:["!to","activeClass","params","queryParams"],html:'\n          <a :href="getRoute()" @click.prevent="navigate" d-attrs="$attrs" :class="className">\n            <template d-for="children,index of $childrens" d-key="index" d-insert="children"></template>\n          </a>\n        ',app:()=>{const e=window.DOMY.useProps(),r=window.DOMY.computed((()=>{var r;return(e.to.startsWith("/")?e.to===this.currentRoute.path:e.to===(null===(r=this.currentRoute.route)||void 0===r?void 0:r.name))?e.activeClass:""}));return{hashMode:this.hashMode,className:r,navigate:()=>{this.navigate({path:e.to,params:e.params,queryParams:e.queryParams})},getRoute:()=>(this.hashMode?"#":"")+t(e.to,e.params,e.queryParams)}}})}createRouterView(){const e=Array.from(this.routes.entries()).reduce(((e,[r,t])=>({[r]:t.component,...e})),{});return window.DOMY.createComponent({props:["transition"],html:'<template d-transition.dynamic="$props.transition" d-component="componentName"></template>',components:e,app:()=>({componentName:window.DOMY.computed((()=>{var e,r;return null!==(r=null===(e=this.currentRoute.route)||void 0===e?void 0:e.name)&&void 0!==r?r:null}))})})}}return function(e){const r=new n(e);return{RouterView:r.createRouterView(),RouterLink:r.createRouterLink(),useRouter:r.getHelper.bind(r),router(e){e.helper("router",(()=>r.getHelper()))}}}}()}}]);